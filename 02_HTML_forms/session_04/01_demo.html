<!-- Module 2 - Session 4: Validation, ARIA, Keyboard & Focus Management -->
<!-- File: module2/session4/demo.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accessible Form with Validation</title>
  <style>
    .error {
      color: red;
      font-size: 0.9em;
    }
    .focus-outline {
      outline: 2px solid blue;
    }
  </style>
</head>
<body>
  <h1>Registration Form</h1>
  <form id="registerForm" novalidate aria-labelledby="formTitle">
    <div>
      <label for="username">Username</label>
      <input type="text" id="username" name="username" aria-required="true" required aria-describedby="usernameError">
      <div id="usernameError" class="error" aria-live="polite"></div>
    </div>

    <div>
      <label for="email">Email</label>
      <input type="email" id="email" name="email" required aria-required="true" aria-describedby="emailError">
      <div id="emailError" class="error" aria-live="polite"></div>
    </div>

    <div>
      <label for="password">Password</label>
      <input type="password" id="password" name="password" required aria-required="true" aria-describedby="passwordError">
      <div id="passwordError" class="error" aria-live="polite"></div>
    </div>

    <button type="submit" id="submitBtn">Register</button>
  </form>

  <script>
    const form = document.getElementById('registerForm');
    const fields = ['username', 'email', 'password'];

    form.addEventListener('submit', function(event) {
      let isValid = true;

      fields.forEach(field => {
        const input = document.getElementById(field);
        const errorDiv = document.getElementById(field + 'Error');
        if (!input.value.trim()) {
          errorDiv.textContent = `${field.charAt(0).toUpperCase() + field.slice(1)} is required.`;
          input.setAttribute('aria-invalid', 'true');
          isValid = false;
        } else {
          errorDiv.textContent = '';
          input.removeAttribute('aria-invalid');
        }
      });

      if (!isValid) {
        event.preventDefault();
        const firstErrorField = fields.find(f => document.getElementById(f).value.trim() === '');
        document.getElementById(firstErrorField).focus();
      }
    });

    // Keyboard focus styling
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
      input.addEventListener('focus', () => input.classList.add('focus-outline'));
      input.addEventListener('blur', () => input.classList.remove('focus-outline'));
    });
  </script>
</body>
</html>
